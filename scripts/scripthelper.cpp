#include <iostream>
#include "scripthelper.h"
#include "object/gameobject.h"

std::vector<AiTimer *> *ScriptHelper::mLevelTimers = nullptr;
std::vector<NeutralTimer *> *ScriptHelper::mNeutralTimers = nullptr;
std::string ScriptHelper::mMapName = "Map1";
DamageInfo* ScriptHelper::sDamageInfo = nullptr;
CharacterIntermediate* ScriptHelper::sCharInter = nullptr;


void ScriptHelper::RegisterGlobals(sol::global_table state)
{
    state["DAMAGESOURCE_RAW"] = 0;
    state["DAMAGESOURCE_INTERNALRAW"] = 1;
    state["DAMAGESOURCE_PERIODIC"] = 2;
    state["DAMAGESOURCE_PROC"] = 3;
    state["DAMAGESOURCE_REACTIVE"] = 4;
    state["DAMAGESOURCE_ONDEATH"] = 5;
    state["DAMAGESOURCE_SPELL"] = 6;
    state["DAMAGESOURCE_ATTACK"] = 7;
    state["DAMAGESOURCE_DEFAULT"] = 8;
    state["DAMAGESOURCE_SPELLAOE"] = 9;
    state["DAMAGESOURCE_SPELLPERSIST"] = 10;
    state["PHYSICAL_DAMAGE"] = 0;
    state["MAGIC_DAMAGE"] = 1;
    state["TRUE_DAMAGE"] = 2;
    state["HIT_Normal"] = 0;
    state["HIT_Critical"] = 1;
    state["HIT_Miss"] = 3;
    state["HIT_Dodge"] = 2;
    state["TTYPE_Invalid"] = -1;
    state["TTYPE_Self"] = 0;
    state["TTYPE_Target"] = 1;
    state["TTYPE_Area"] = 2;
    state["TTYPE_Cone"] = 3;
    state["TTYPE_SelfAOE"] = 4;
    state["TTYPE_TargetOrLocation"] = 5;
    state["TTYPE_Location"] = 6;
    state["TTYPE_Direction"] = 7;
    state["TEAM_UNKNOWN"] = 0;
    state["TEAM_ORDER"] = 100;
    state["TEAM_CHAOS"] = 200;
    state["TEAM_NEUTRAL"] = 300;
    state["TEAM_OWNER"] = 401;
    state["TEAM_CASTER"] = 402;
    state["TEAM_TARGET"] = 403;
    state["SPAWN_LOCATION"] = 1;
    state["SpellSlots"] = 0;
    state["InventorySlots"] = 1;
    state["ExtraSlots"] = 2;
    state["SPELLBOOK_CHAMPION"] = 0;
    state["SPELLBOOK_SUMMONER"] = 1;
    state["BUFF_REPLACE_EXISTING"] = 0;
    state["BUFF_RENEW_EXISTING"] = 1;
    state["BUFF_STACKS_AND_RENEWS"] = 2;
    state["BUFF_STACKS_AND_OVERLAPS"] = 3;
    state["ChannelingStopCondition_NotCancelled"] = 0;
    state["ChannelingStopCondition_Success"] = 1;
    state["ChannelingStopCondition_Cancel"] = 2;
    state["ChannelingStopSource_NotCancelled"] = 0;
    state["ChannelingStopSource_TimeCompleted"] = 1;
    state["ChannelingStopSource_Animation"] = 2;
    state["ChannelingStopSource_LostTarget"] = 3;
    state["ChannelingStopSource_StunnedOrSilencedOrTaunted"] = 4;
    state["ChannelingStopSource_ChannelingCondition"] = 5;
    state["ChannelingStopSource_Die"] = 6;
    state["ChannelingStopSource_HeroReincarnate"] = 7;
    state["ChannelingStopSource_Move"] = 8;
    state["ChannelingStopSource_Attack"] = 9;
    state["ChannelingStopSource_Casting"] = 10;
    state["ChannelingStopSource_Unknown"] = 11;
    state["FURTHEST_WITHIN_RANGE"] = 0;
    state["FIRST_COLLISION_HIT"] = 1;
    state["GET_NEAREST_IN_RANGE"] = 2;
    state["GET_NEAREST_IN_RANGE_INCLUDE_UNITS"] = 3;
    state["CANCEL_ORDER"] = 0;
    state["POSTPONE_CURRENT_ORDER"] = 1;
    state["PAR_MANA"] = 0;
    state["PAR_ENERGY"] = 1;
    state["PAR_SOULS"] = 2;
    state["PAR_SHIELD"] = 3;
    state["SPELL_AffectBuildings"] = 4096;
    state["SPELL_AffectEnemies"] = 1024;
    state["SPELL_AffectFriends"] = 2048;
    state["SPELL_Autocast"] = 2;
    state["SPELL_Instacast"] = 4;
    state["SPELL_NotAffectSelf"] = 0x2000;
    state["SPELL_PersistThroughDeath"] = 8;
    state["SPELL_NonDisspellable"] = 16;
    state["SPELL_AffectBuildings"] = 4096;
    state["SPELL_AffectDead"] = 0x80000;
    state["SPELL_AffectEnemies"] = 1024;
    state["SPELL_AffectFriends"] = 2048;
    state["SPELL_AffectHeroes"] = 0x10000;
    state["SPELL_AffectMinions"] = 0x8000;
    state["SPELL_AffectNeutral"] = 0x4000;
    state["SPELL_AffectNotPet"] = 0x100000;
    state["SPELL_AffectTurrets"] = 0x20000;
    state["SPELL_AlwaysSelf"] = 0x40000;
    state["SPELL_AffectBarrackOnly"] = 0x200000;
    state["SPELL_NonTargetableAlly"] = 0x800000;
    state["SPELL_NonTargetableEnemy"] = 0x1000000;
    state["SPELL_NonTargetableAll"] = 0x1800000;
    state["SPELL_TargetableToAll"] = 0x2000000;
    state["BUFF_Aura"] = 1;
    state["BUFF_CombatDehancer"] = 3;
    state["BUFF_CombatEnchancer"] = 2;
    state["BUFF_Damage"] = 11;
    state["BUFF_Fear"] = 20;
    state["BUFF_Frenzy"] = 19;
    state["BUFF_Haste"] = 13;
    state["BUFF_Heal"] = 12;
    state["BUFF_Internal"] = 0;
    state["BUFF_Invisibility"] = 5;
    state["BUFF_Invulnerability"] = 16;
    state["BUFF_Net"] = 21;
    state["BUFF_PhysicalImmunity"] = 15;
    state["BUFF_Polymorph"] = 8;
    state["BUFF_Silence"] = 6;
    state["BUFF_Sleep"] = 17;
    state["BUFF_NearSight"] = 18;
    state["BUFF_Slow"] = 9;
    state["BUFF_Snare"] = 10;
    state["BUFF_SpellImmunity"] = 14;
    state["BUFF_Suppression"] = 23;
    state["BUFF_Stun"] = 4;
    state["BUFF_Taunt"] = 7;
    state["BUFF_Pacified"] = 6;
    state["BUFF_Net"] = 6;
    state["BUFF_Disarm"] = 6;
    state["BUFF_Poison"] = 22;
    state["BUFF_Suppression"] = 23;
    state["BUFF_Blind"] = 24;
    state["UNITSCAN_Enemies"] = 1024;
    state["UNITSCAN_Friends"] = 2048;
    state["UNITSCAN_Buildings"] = 4096;
    state["UNITSCAN_Dead"] = 0x80000;
    state["EFFCREATE_KEEPALIVE"] = 1;
    state["EFFCREATE_UPDATE_ORIENTATION"] = 16;
    state["EFFCREATE_SIMULATE_WHILE_OFF_SCREEN"] = 32;
    state["AI_ORDER_NONE"] = 0;
    state["AI_HOLD"] = 1;
    state["AI_MOVETO"] = 2;
    state["AI_ATTACKTO"] = 3;
    state["AI_TEMP_CASTSPELL"] = 4;
    state["AI_PETHARDATTACK"] = 5;
    state["AI_PETHARDMOVE"] = 6;
    state["AI_PETHARDRETURN"] = 9;
    state["AI_ATTACKMOVE"] = 7;
    state["AI_TAUNT"] = 8;
    state["MAX_SPELLS_PER_CHAR"] = 4;
    state["NUM_INVENTORY_SLOTS"] = 6;
    state["MAX_SLOTS_PER_CHARACTER"] = 10;
    state["NONSPELL_DAMAGESOURCE_RAW"] = 0;
    state["NONSPELL_DAMAGESOURCE_INTERNALRAW"] = 1;
    state["NONSPELL_DAMAGESOURCE_PERIODIC"] = 2;
    state["NONSPELL_DAMAGESOURCE_REACTIVE"] = 4;
    state["NONSPELL_DAMAGESOURCE_ONDEATH"] = 5;
    state["DAMAGESOURCE_RAW"] = 0;
    state["DAMAGESOURCE_INTERNALRAW"] = 1;
    state["DAMAGESOURCE_PERIODIC"] = 2;
    state["DAMAGESOURCE_PROC"] = 3;
    state["DAMAGESOURCE_TO_REACTIVE"] = 4;
    state["DAMAGESOURCE_TO_ONDEATH"] = 5;
    state["DAMAGESOURCE_SPELL"] = 6;
    state["DAMAGESOURCE_ATTACK"] = 7;
    state["DAMAGESOURCE_DEFAULT"] = 8;
    state["DAMAGESOURCE_SPELLAOE"] = 9;
    state["DAMAGESOURCE_SPELLPERSIST"] = 10;
    state["SPAWN_HQ"] = 0;
    state["SPAWN_BARRACKS_LANE_C "] = 3;
    state["SPAWN_BARRACKS_LANE_R"] = 2;
    state["SPAWN_BARRACKS_LANE_L "] = 4;
    state["SPAWN_LOCATION"] = 1;
    state["CHANNELINGSTOPCONDITION_SUCCESS"] = 1;
    state["CHANNELINGSTOPCONDITION_CANCEL"] = 2;
    state["CHANNELINGSTOPSOURCE_NORMAL"] = 1;
    state["CHANNELINGSTOPSOURCE_ANIMATION"] = 2;
    state["CHANNELINGSTOPSOURCE_LOSTTARGET"] = 3;
    state["CHANNELINGSTOPSOURCE_STUNNEDORSILENCEDORTAUNTED"] = 4;
    state["CHANNELINGSTOPSOURCE_CHANNELINGCONDITION"] = 5;
    state["CHANNELINGSTOPSOURCE_DIE"] = 6;
    state["CHANNELINGSTOPSOURCE_HEROREINCARNATE"] = 7;
    state["CHANNELINGSTOPSOURCE_MOVE"] = 8;
    state["CHANNELINGSTOPSOURCE_ATTACK"] = 9;

    state["Log"] = &ScriptHelper::Log;
    state["GetPosition"] = &ScriptHelper::GetPosition;
    state["SetPosition"] = &ScriptHelper::SetPosition;
    state["FacePosition"] = &ScriptHelper::FacePosition;
    state["IncPosition"] = &ScriptHelper::IncPosition;
    state["IncGold"] = &ScriptHelper::IncGold;
    state["GiveExpToNearHeroesFromNeutral"] = &ScriptHelper::GiveExpToNearHeroesFromNeutral;
    state["GetNormalizedPositionDelta"] = &ScriptHelper::GetNormalizedPositionDelta;
    state["Multiply3dPointByScalar"] = &ScriptHelper::Multiply3dPointByScalar;
    state["DistPoint3DSegment3D"] = &ScriptHelper::DistPoint3DSegment3D;
    state["Add3dPoints"] = &ScriptHelper::Add3dPoints;
    state["GetTeamID"] = &ScriptHelper::GetTeamID;
    state["GetID"] = &ScriptHelper::GetID;
    state["MakeSay"] = &ScriptHelper::MakeSay;
    state["GetHQType"] = &ScriptHelper::GetHQType;
    state["GetDampenerType"] = &ScriptHelper::GetDampenerType;
    state["IsObjectHero"] = &ScriptHelper::IsObjectHero;
    state["IsObjectAI"] = &ScriptHelper::IsObjectAI;
    state["IsTurretAI"] = &ScriptHelper::IsTurretAI;
    state["GetObjectLaneId"] = &ScriptHelper::GetObjectLaneId;
    state["GetTurretPosition"] = &ScriptHelper::GetTurretPosition;
    state["GetLinkedBarrack"] = &ScriptHelper::GetLinkedBarrack;
    state["GetDampener"] = &ScriptHelper::GetDampener;
    state["IsDampener"] = &ScriptHelper::IsDampener;
    state["SetDampenerState"] = &ScriptHelper::SetDampenerState;
    state["GetLane"] = &ScriptHelper::GetLane;
    state["EndGame"] = &ScriptHelper::EndGame;
    state["InitTimer"] = &ScriptHelper::InitTimer;
    state["AssignTeamGold"] = &ScriptHelper::AssignTeamGold;
    state["luaNeutralInitTimer"] = &ScriptHelper::luaNeutralInitTimer;
    state["SpawnNeutralMinion"] = &ScriptHelper::SpawnNeutralMinion;
    state["LoadScriptIntoScript"] = &ScriptHelper::LoadScriptIntoScript;
    state["Make3DPoint"] = &ScriptHelper::Make3DPoint;
    state["GetTurret"] = &ScriptHelper::GetTurret;
    state["GetBarracks"] = &ScriptHelper::GetBarracks;
    state["SetDisableMinionSpawn"] = &ScriptHelper::SetDisableMinionSpawn;
    state["SetBarracksEnabled"] = &ScriptHelper::SetBarracksEnabled;
    state["GetHQ"] = &ScriptHelper::GetHQ;
    state["GetTutorialPlayer"] = &ScriptHelper::GetTutorialPlayer;
    state["CreateGameObject"] = &ScriptHelper::CreateGameObject;
    state["PreloadCharacter"] = &ScriptHelper::PreloadCharacter;
    state["PreloadSpell"] = &ScriptHelper::PreloadSpell;
    state["PreloadParticle"] = &ScriptHelper::PreloadParticle;
    state["GetHashedGameObjName"] = &ScriptHelper::GetHashedGameObjName;
    state["SetLaneAffinity"] = &ScriptHelper::SetLaneAffinity;
    state["CreateChildTurret"] = &ScriptHelper::CreateChildTurret;
    state["ToggleInputLockingFlag"] = &ScriptHelper::ToggleInputLockingFlag;
    state["SetInputLockingFlag"] = &ScriptHelper::SetInputLockingFlag;
    state["ToggleFogOfWar"] = &ScriptHelper::ToggleFogOfWar;
    state["ToggleFogOfWarOn"] = &ScriptHelper::ToggleFogOfWarOn;
    state["SetCircularCameraRestriction"] = &ScriptHelper::SetCircularCameraRestriction;
    state["LockCamera"] = &ScriptHelper::LockCamera;
    state["PauseGame"] = &ScriptHelper::PauseGame;
    state["ResumeGame"] = &ScriptHelper::ResumeGame;
    state["PlayTutorialAudioEvent"] = &ScriptHelper::PlayTutorialAudioEvent;
    state["GetUnitSkinName"] = &ScriptHelper::GetUnitSkinName;
    state["IncExp"] = &ScriptHelper::IncExp;
    state["GetTime"] = &ScriptHelper::GetTime;
    state["_ALERT"] = &ScriptHelper::_ALERT;
    state["GetTotalTeamMinionsSpawned"] = &ScriptHelper::GetTotalTeamMinionsSpawned;

    //Damage
    state["GetDamageType"] = &ScriptHelper::GetDamageType;
    state["GetSourceType"] = &ScriptHelper::GetSourceType;
    state["GetDamageAmount"] = &ScriptHelper::GetDamageAmount;
    state["GetPercentageOfAttack"] = &ScriptHelper::GetPercentageOfAttack;
    state["GetAttacker"] = &ScriptHelper::GetAttacker;
    state["GetHitResult"] = &ScriptHelper::GetHitResult;

    //Building Blocks
    state["BBSetCameraPosition"] = &ScriptHelper::BBSetCameraPosition;
    state["BBIsPathable"] = &ScriptHelper::BBIsPathable;
    state["BBTeleportToKeyLocation"] = &ScriptHelper::BBTeleportToKeyLocation;
    state["BBTeleportToPosition"] = &ScriptHelper::BBTeleportToPosition;
    state["BBGetNearestPassablePosition"] = &ScriptHelper::BBGetNearestPassablePosition;
    state["BBForEachUnitInTargetAreaAddBuff"] = &ScriptHelper::BBForEachUnitInTargetAreaAddBuff;
    state["BBForEachUnitInTargetArea"] = &ScriptHelper::BBForEachUnitInTargetArea;
    state["BBForEachUnitInTargetAreaRandom"] = &ScriptHelper::BBForEachUnitInTargetAreaRandom;
    state["BBForNClosestUnitsInTargetArea"] = &ScriptHelper::BBForNClosestUnitsInTargetArea;
    state["BBForEachChampion"] = &ScriptHelper::BBForEachChampion;
    state["BBForEachUnitInTargetRectangle"] = &ScriptHelper::BBForEachUnitInTargetRectangle;
    state["BBGetRandomPointInAreaUnit"] = &ScriptHelper::BBGetRandomPointInAreaUnit;
    state["BBGetRandomPointInAreaPosition"] = &ScriptHelper::BBGetRandomPointInAreaPosition;
    state["BBGetUnitPosition"] = &ScriptHelper::BBGetUnitPosition;
    state["BBGetSkinID"] = &ScriptHelper::BBGetSkinID;
    state["BBGetPointByUnitFacingOffset"] = &ScriptHelper::BBGetPointByUnitFacingOffset;
    state["BBGetMissilePosFromID"] = &ScriptHelper::BBGetMissilePosFromID;
    state["BBModifyPosition"] = &ScriptHelper::BBModifyPosition;
    state["BBIncFlatPARPoolMod"] = &ScriptHelper::BBIncFlatPARPoolMod;
    state["BBIncFlatPARRegenMod"] = &ScriptHelper::BBIncFlatPARRegenMod;
    state["BBIncPercentPARPoolMod"] = &ScriptHelper::BBIncPercentPARPoolMod;
    state["BBIncPercentPARRegenMod"] = &ScriptHelper::BBIncPercentPARRegenMod;
    state["BBIncPermanentFlatPARPoolMod"] = &ScriptHelper::BBIncPermanentFlatPARPoolMod;
    state["BBIncPermanentFlatPARRegenMod"] = &ScriptHelper::BBIncPermanentFlatPARRegenMod;
    state["BBIncPermanentPercentPARPoolMod"] = &ScriptHelper::BBIncPermanentPercentPARPoolMod;
    state["BBIncPermanentPercentPARRegenMod"] = &ScriptHelper::BBIncPermanentPercentPARRegenMod;
    state["BBGetFlatPARPoolMod"] = &ScriptHelper::BBGetFlatPARPoolMod;
    state["BBGetFlatPARRegenMod"] = &ScriptHelper::BBGetFlatPARRegenMod;
    state["BBGetPercentPARPoolMod"] = &ScriptHelper::BBGetPercentPARPoolMod;
    state["BBGetPercentPARRegenMod"] = &ScriptHelper::BBGetPercentPARRegenMod;
    state["BBApplyDamage"] = &ScriptHelper::BBApplyDamage;
    state["BBApplyStun"] = &ScriptHelper::BBApplyStun;
    state["BBApplyPacified"] = &ScriptHelper::BBApplyPacified;
    state["BBApplyNet"] = &ScriptHelper::BBApplyNet;
    state["BBApplyDisarm"] = &ScriptHelper::BBApplyDisarm;
    state["BBApplySuppression"] = &ScriptHelper::BBApplySuppression;
    state["BBApplySilence"] = &ScriptHelper::BBApplySilence;
    state["BBApplyRoot"] = &ScriptHelper::BBApplyRoot;
    state["BBApplyTaunt"] = &ScriptHelper::BBApplyTaunt;
    state["BBApplyCharm"] = &ScriptHelper::BBApplyCharm;
    state["BBApplyFear"] = &ScriptHelper::BBApplyFear;
    state["BBApplySleep"] = &ScriptHelper::BBApplySleep;
    state["BBApplyNearSight"] = &ScriptHelper::BBApplyNearSight;
    state["BBApplyNoRender"] = &ScriptHelper::BBApplyNoRender;
    state["BBApplyForceRenderParticles"] = &ScriptHelper::BBApplyForceRenderParticles;
    state["BBApplyStealth"] = &ScriptHelper::BBApplyStealth;
    state["BBApplyRevealSpecificUnit"] = &ScriptHelper::BBApplyRevealSpecificUnit;
    state["BBApplySuppressCallForHelp"] = &ScriptHelper::BBApplySuppressCallForHelp;
    state["BBApplyCallForHelpSuppresser"] = &ScriptHelper::BBApplyCallForHelpSuppresser;
    state["BBApplyIgnoreCallForHelp"] = &ScriptHelper::BBApplyIgnoreCallForHelp;
    state["BBIncPAR"] = &ScriptHelper::BBIncPAR;
    state["BBIncGold"] = &ScriptHelper::BBIncGold;
    state["BBLuaGetGold"] = &ScriptHelper::BBLuaGetGold;
    state["BBIncHealth"] = &ScriptHelper::BBIncHealth;
    state["BBDrawDefaultHitEffects"] = &ScriptHelper::BBDrawDefaultHitEffects;
    state["BBGetCastSpellTargetPos"] = &ScriptHelper::BBGetCastSpellTargetPos;
    state["BBAdjustCastInfoCenterAOE"] = &ScriptHelper::BBAdjustCastInfoCenterAOE;
    state["BBSpawnPet"] = &ScriptHelper::BBSpawnPet;
    state["BBSpawnMinion"] = &ScriptHelper::BBSpawnMinion;
    state["BBCloneUnit"] = &ScriptHelper::BBCloneUnit;
    state["BBCloneUnitPet"] = &ScriptHelper::BBCloneUnitPet;
    state["BBIncExp"] = &ScriptHelper::BBIncExp;
    state["BBForEachPetInTarget"] = &ScriptHelper::BBForEachPetInTarget;
    state["BBSetDodgePiercing"] = &ScriptHelper::BBSetDodgePiercing;
    state["BBSetStateDisableAmbientGold"] = &ScriptHelper::BBSetStateDisableAmbientGold;
    state["BBSetStunned"] = &ScriptHelper::BBSetStunned;
    state["BBSetPacified"] = &ScriptHelper::BBSetPacified;
    state["BBSetNetted"] = &ScriptHelper::BBSetNetted;
    state["BBSetDisarmed"] = &ScriptHelper::BBSetDisarmed;
    state["BBSetRooted"] = &ScriptHelper::BBSetRooted;
    state["BBSetSuppressCallForHelp"] = &ScriptHelper::BBSetSuppressCallForHelp;
    state["BBSetCallForHelpSuppresser"] = &ScriptHelper::BBSetCallForHelpSuppresser;
    state["BBRedirectGold"] = &ScriptHelper::BBRedirectGold;
    state["BBSetTargetingType"] = &ScriptHelper::BBSetTargetingType;
    state["BBSetSpell"] = &ScriptHelper::BBSetSpell;
    state["BBSetBuffCasterUnit"] = &ScriptHelper::BBSetBuffCasterUnit;
    state["BBSetTriggerUnit"] = &ScriptHelper::BBSetTriggerUnit;
    state["BBSetUnit"] = &ScriptHelper::BBSetUnit;
    state["BBInvalidateUnit"] = &ScriptHelper::BBInvalidateUnit;
    state["BBForceDead"] = &ScriptHelper::BBForceDead;
    state["BBSetIgnoreCallForHelp"] = &ScriptHelper::BBSetIgnoreCallForHelp;
    state["BBSpellBuffAdd"] = &ScriptHelper::BBSpellBuffAdd;
    state["BBTimeChannelTickExecute"] = &ScriptHelper::BBTimeChannelTickExecute;
    state["BBBreak"] = &ScriptHelper::BBBreak;
    state["BBSpellBuffRemoveType"] = &ScriptHelper::BBSpellBuffRemoveType;
    state["BBSpellBuffRemove"] = &ScriptHelper::BBSpellBuffRemove;
    state["BBSpellBuffRemoveCurrent"] = &ScriptHelper::BBSpellBuffRemoveCurrent;
    state["BBSpellBuffClear"] = &ScriptHelper::BBSpellBuffClear;
    state["BBGetBuffRemainingDuration"] = &ScriptHelper::BBGetBuffRemainingDuration;
    state["BBSpellEffectCreate"] = &ScriptHelper::BBSpellEffectCreate;
    state["BBSpellEffectRemove"] = &ScriptHelper::BBSpellEffectRemove;
    state["BBStopChanneling"] = &ScriptHelper::BBStopChanneling;
    state["BBStopMove"] = &ScriptHelper::BBStopMove;
    state["BBMove"] = &ScriptHelper::BBMove;
    state["BBMoveAway"] = &ScriptHelper::BBMoveAway;
    state["BBDestroyMissile"] = &ScriptHelper::BBDestroyMissile;
    state["BBDestroyMissileForTarget"] = &ScriptHelper::BBDestroyMissileForTarget;
    state["BBSpellCast"] = &ScriptHelper::BBSpellCast;
    state["BBCancelAutoAttack"] = &ScriptHelper::BBCancelAutoAttack;
    state["BBOverrideAutoAttack"] = &ScriptHelper::BBOverrideAutoAttack;
    state["BBRemoveOverrideAutoAttack"] = &ScriptHelper::BBRemoveOverrideAutoAttack;
    state["BBSetAutoAttackTargetingFlags"] = &ScriptHelper::BBSetAutoAttackTargetingFlags;
    state["BBSetPetReturnRadius"] = &ScriptHelper::BBSetPetReturnRadius;
    state["BBCreateItem"] = &ScriptHelper::BBCreateItem;
    state["BBSealSpellSlot"] = &ScriptHelper::BBSealSpellSlot;
    state["BBSetBuffToolTipVar"] = &ScriptHelper::BBSetBuffToolTipVar;
    state["BBSetSpellToolTipVar"] = &ScriptHelper::BBSetSpellToolTipVar;
    state["BBLinkVisibility"] = &ScriptHelper::BBLinkVisibility;
    state["BBIsInBrush"] = &ScriptHelper::BBIsInBrush;
    state["BBGetHeightDifference"] = &ScriptHelper::BBGetHeightDifference;
    state["BBRemoveLinkVisibility"] = &ScriptHelper::BBRemoveLinkVisibility;
    state["BBSetNearSight"] = &ScriptHelper::BBSetNearSight;
    state["BBGetNearSight"] = &ScriptHelper::BBGetNearSight;
    state["BBGetPetOwner"] = &ScriptHelper::BBGetPetOwner;
    state["BBStartTrackingCollisions"] = &ScriptHelper::BBStartTrackingCollisions;
    state["BBStopMoveBlock"] = &ScriptHelper::BBStopMoveBlock;
    state["BBStopCurrentOverrideAnimation"] = &ScriptHelper::BBStopCurrentOverrideAnimation;
    state["BBPreloadCharacter"] = &ScriptHelper::BBPreloadCharacter;
    state["BBPreloadParticle"] = &ScriptHelper::BBPreloadParticle;
    state["BBPreloadSpell"] = &ScriptHelper::BBPreloadSpell;
    state["BBDispellPositiveBuffs"] = &ScriptHelper::BBDispellPositiveBuffs;
    state["BBDispellNegativeBuffs"] = &ScriptHelper::BBDispellNegativeBuffs;
    state["BBRemovePerceptionBubble"] = &ScriptHelper::BBRemovePerceptionBubble;
    state["BBAddUnitPerceptionBubble"] = &ScriptHelper::BBAddUnitPerceptionBubble;
    state["BBAddPosPerceptionBubble"] = &ScriptHelper::BBAddPosPerceptionBubble;
    state["BBPlayAnimation"] = &ScriptHelper::BBPlayAnimation;
    state["BBUnlockAnimation"] = &ScriptHelper::BBUnlockAnimation;
    state["BBGetNumberOfHeroesOnTeam"] = &ScriptHelper::BBGetNumberOfHeroesOnTeam;
    state["BBCanSeeTarget"] = &ScriptHelper::BBCanSeeTarget;
    state["BBPushCharacterData"] = &ScriptHelper::BBPushCharacterData;
    state["BBSetSlotSpellCooldownTimeVer2"] = &ScriptHelper::BBSetSlotSpellCooldownTimeVer2;
    state["BBPopCharacterData"] = &ScriptHelper::BBPopCharacterData;
    state["BBPopAllCharacterData"] = &ScriptHelper::BBPopAllCharacterData;
    state["BBPushCharacterFade"] = &ScriptHelper::BBPushCharacterFade;
    state["BBPopCharacterFade"] = &ScriptHelper::BBPopCharacterFade;
    state["BBForEachPointAroundCircle"] = &ScriptHelper::BBForEachPointAroundCircle;
    state["BBSetCharacterDebugRadius"] = &ScriptHelper::BBSetCharacterDebugRadius;
    state["BBForEachPointOnLine"] = &ScriptHelper::BBForEachPointOnLine;
    state["BBFaceDirection"] = &ScriptHelper::BBFaceDirection;
    state["BBGetGameTime"] = &ScriptHelper::BBGetGameTime;
    state["BBGetChampionBySkinName"] = &ScriptHelper::BBGetChampionBySkinName;
    state["BBPauseAnimation"] = &ScriptHelper::BBPauseAnimation;
    state["BBEnableWallOfGrassTracking"] = &ScriptHelper::BBEnableWallOfGrassTracking;
    state["BBShowHealthBar"] = &ScriptHelper::BBShowHealthBar;
    state["BBClearOverrideAnimation"] = &ScriptHelper::BBClearOverrideAnimation;
    state["BBOverrideAnimation"] = &ScriptHelper::BBOverrideAnimation;
    state["BBIncSpellLevel"] = &ScriptHelper::BBIncSpellLevel;
    state["BBSetPARCostInc"] = &ScriptHelper::BBSetPARCostInc;
    state["BBGetPARCostInc"] = &ScriptHelper::BBGetPARCostInc;
    state["BBSetPARMultiplicativeCostInc"] = &ScriptHelper::BBSetPARMultiplicativeCostInc;
    state["BBGetPARMultiplicativeCostInc"] = &ScriptHelper::BBGetPARMultiplicativeCostInc;
    state["BBSetInCastTable"] = &ScriptHelper::BBSetInCastTable;
    state["BBOverrideCastRange"] = &ScriptHelper::BBOverrideCastRange;
    state["BBGetCastRange"] = &ScriptHelper::BBGetCastRange;
    state["BBAddDebugCircle"] = &ScriptHelper::BBAddDebugCircle;
    state["BBRemoveDebugCircle"] = &ScriptHelper::BBRemoveDebugCircle;
    state["BBModifyDebugCircleRadius"] = &ScriptHelper::BBModifyDebugCircleRadius;
    state["BBModifyDebugCircleColor"] = &ScriptHelper::BBModifyDebugCircleColor;
    state["BBApplyAssistMarker"] = &ScriptHelper::BBApplyAssistMarker;
    state["BBSkipNextAutoAttack"] = &ScriptHelper::BBSkipNextAutoAttack;
    state["BBIncMaxHealth"] = &ScriptHelper::BBIncMaxHealth;
    state["BBGetIsZombie"] = &ScriptHelper::BBGetIsZombie;
    state["GetCFParam"] = &ScriptHelper::GetCFParam;

    //Spells
    state["Say"] = &ScriptHelper::Say;
    state["ApplyStun"] = &ScriptHelper::ApplyStun;
    state["ApplyPacified"] = &ScriptHelper::ApplyPacified;
    state["ApplyNet"] = &ScriptHelper::ApplyNet;
    state["ApplyDisarm"] = &ScriptHelper::ApplyDisarm;
    state["ApplyRoot"] = &ScriptHelper::ApplyRoot;
    state["ApplySilence"] = &ScriptHelper::ApplySilence;
    state["ApplySuppression"] = &ScriptHelper::ApplySuppression;
    state["ApplySuppressCallForHelp"] = &ScriptHelper::ApplySuppressCallForHelp;
    state["ApplyIgnoreCallForHelp"] = &ScriptHelper::ApplyIgnoreCallForHelp;
    state["ApplyCallForHelpSuppresser"] = &ScriptHelper::ApplyCallForHelpSuppresser;
    state["CancelOrder"] = &ScriptHelper::CancelOrder;
    state["ChannelingStart"] = &ScriptHelper::ChannelingStart;
    state["ChannelingStop"] = &ScriptHelper::ChannelingStop;
    state["DrawDefaultHitEffects"] = &ScriptHelper::DrawDefaultHitEffects;
    state["GetIsAttackOverride"] = &ScriptHelper::GetIsAttackOverride;
    state["GetCastSpellLevelPlusOne"] = &ScriptHelper::GetCastSpellLevelPlusOne;
    state["GetCastSpellTargetPos"] = &ScriptHelper::GetCastSpellTargetPos;
    state["GetCastSpellTargetsHitPlusOne"] = &ScriptHelper::GetCastSpellTargetsHitPlusOne;
    state["GetCastSpellLuaInfo"] = &ScriptHelper::GetCastSpellLuaInfo;
    state["GetCasterID"] = &ScriptHelper::GetCasterID;
    state["GetHealth"] = &ScriptHelper::GetHealth;
    state["GetHealthPercent"] = &ScriptHelper::GetHealthPercent;
    state["GetInvulnerable"] = &ScriptHelper::GetInvulnerable;
    state["GetPhysicalImmune"] = &ScriptHelper::GetPhysicalImmune;
    state["GetTargetable"] = &ScriptHelper::GetTargetable;
    state["GetTargetableToTeam"] = &ScriptHelper::GetTargetableToTeam;
    state["GetMagicImmune"] = &ScriptHelper::GetMagicImmune;
    state["GetPAR"] = &ScriptHelper::GetPAR;
    state["GetPARCost"] = &ScriptHelper::GetPARCost;
    state["GetPARPercent"] = &ScriptHelper::GetPARPercent;
    state["GetPARType"] = &ScriptHelper::GetPARType;
    state["HasPARType"] = &ScriptHelper::HasPARType;
    state["GetMaxHealth"] = &ScriptHelper::GetMaxHealth;
    state["GetMaxPAR"] = &ScriptHelper::GetMaxPAR;
    state["GetName"] = &ScriptHelper::GetName;
    state["GetArmor"] = &ScriptHelper::GetArmor;
    state["GetSpellBlock"] = &ScriptHelper::GetSpellBlock;
    state["GetDodge"] = &ScriptHelper::GetDodge;
    state["GetMissChance"] = &ScriptHelper::GetMissChance;
    state["GetAttackSpeedMod"] = &ScriptHelper::GetAttackSpeedMod;
    state["GetMovementSpeed"] = &ScriptHelper::GetMovementSpeed;
    state["GetLevel"] = &ScriptHelper::GetLevel;
    state["GetTotalAttackDamage"] = &ScriptHelper::GetTotalAttackDamage;
    state["GetSlotSpellCooldownTime"] = &ScriptHelper::GetSlotSpellCooldownTime;
    state["GetSlotSpellLevel"] = &ScriptHelper::GetSlotSpellLevel;
    state["GetSlotSpellName"] = &ScriptHelper::GetSlotSpellName;
    state["GetSpellName"] = &ScriptHelper::GetSpellName;
    state["GetSpellSlot"] = &ScriptHelper::GetSpellSlot;
    state["GetNoRender"] = &ScriptHelper::GetNoRender;
    state["GetBrushVisibilityFake"] = &ScriptHelper::GetBrushVisibilityFake;
    state["GetForceRenderParticles"] = &ScriptHelper::GetForceRenderParticles;
    state["GetStealthed"] = &ScriptHelper::GetStealthed;
    state["GetRevealSpecificUnit"] = &ScriptHelper::GetRevealSpecificUnit;
    state["GetTaunted"] = &ScriptHelper::GetTaunted;
    state["GetCharmed"] = &ScriptHelper::GetCharmed;
    state["GetSuppressed"] = &ScriptHelper::GetSuppressed;
    state["GetFeared"] = &ScriptHelper::GetFeared;
    state["GetDisableAmbientGold"] = &ScriptHelper::GetDisableAmbientGold;
    state["SetDisableAmbientGold"] = &ScriptHelper::SetDisableAmbientGold;
    state["GetSleep"] = &ScriptHelper::GetSleep;
    state["GetNearSight"] = &ScriptHelper::GetNearSight;
    state["GetGhosted"] = &ScriptHelper::GetGhosted;
    state["GetGhostProof"] = &ScriptHelper::GetGhostProof;
    state["IncHealth"] = &ScriptHelper::IncHealth;
    state["IncMana"] = &ScriptHelper::IncMana;
    state["IncMoveSpeedFloorMod"] = &ScriptHelper::IncMoveSpeedFloorMod;
    state["IncFlatDodgeMod"] = &ScriptHelper::IncFlatDodgeMod;
    state["IncFlatMissChanceMod"] = &ScriptHelper::IncFlatMissChanceMod;
    state["IncPercentArmorPenetrationMod"] = &ScriptHelper::IncPercentArmorPenetrationMod;
    state["IncPercentMagicPenetrationMod"] = &ScriptHelper::IncPercentMagicPenetrationMod;
    state["IncPercentMultiplicativeAttackSpeedMod"] = &ScriptHelper::IncPercentMultiplicativeAttackSpeedMod;
    state["IncPercentMultiplicativeMovementSpeedMod"] = &ScriptHelper::IncPercentMultiplicativeMovementSpeedMod;
    state["IssueOrder"] = &ScriptHelper::IssueOrder;
    state["RaiseSpellFlag"] = &ScriptHelper::RaiseSpellFlag;
    state["ReincarnateNonDeadHero"] = &ScriptHelper::ReincarnateNonDeadHero;
    state["SetCanCastWhileDisabled"] = &ScriptHelper::SetCanCastWhileDisabled;
    state["SetInvulnerable"] = &ScriptHelper::SetInvulnerable;
    state["SetTargetable"] = &ScriptHelper::SetTargetable;
    state["SetNotTargetableToTeam"] = &ScriptHelper::SetNotTargetableToTeam;
    state["SetPhysicalImmune"] = &ScriptHelper::SetPhysicalImmune;
    state["SetMagicImmune"] = &ScriptHelper::SetMagicImmune;
    state["SetRooted"] = &ScriptHelper::SetRooted;
    state["SetScaleSkinCoef"] = &ScriptHelper::SetScaleSkinCoef;
    state["SetSilenced"] = &ScriptHelper::SetSilenced;
    state["SetSlotSpellCooldownTime"] = &ScriptHelper::SetSlotSpellCooldownTime;
    state["SetStealthed"] = &ScriptHelper::SetStealthed;
    state["SetRevealSpecificUnit"] = &ScriptHelper::SetRevealSpecificUnit;
    state["SetStunned"] = &ScriptHelper::SetStunned;
    state["SetPacified"] = &ScriptHelper::SetPacified;
    state["SetNetted"] = &ScriptHelper::SetNetted;
    state["SetDisarmed"] = &ScriptHelper::SetDisarmed;
    state["SetTaunted"] = &ScriptHelper::SetTaunted;
    state["SetCharmed"] = &ScriptHelper::SetCharmed;
    state["SetFeared"] = &ScriptHelper::SetFeared;
    state["SetSleep"] = &ScriptHelper::SetSleep;
    state["SetNearSight"] = &ScriptHelper::SetNearSight;
    state["SetNoRender"] = &ScriptHelper::SetNoRender;
    state["SetForceRenderParticles"] = &ScriptHelper::SetForceRenderParticles;
    state["SetGhosted"] = &ScriptHelper::SetGhosted;
    state["SetSuppressed"] = &ScriptHelper::SetSuppressed;
    state["SetGhostProof"] = &ScriptHelper::SetGhostProof;
    state["SetSuppressCallForHelp"] = &ScriptHelper::SetSuppressCallForHelp;
    state["SetCallForHelpSuppresser"] = &ScriptHelper::SetCallForHelpSuppresser;
    state["SetBrushVisibilityFake"] = &ScriptHelper::SetBrushVisibilityFake;
    state["SetIgnoreCallForHelp"] = &ScriptHelper::SetIgnoreCallForHelp;
    state["SpellBuffAdd"] =  &ScriptHelper::SpellBuffAdd;
    state["SpellBuffAddNoRenew"] = &ScriptHelper::SpellBuffAddNoRenew;
    state["SpellBuffCount"] = &ScriptHelper::SpellBuffCount;
    state["SpellBuffRemove"] = &ScriptHelper::SpellBuffRemove;
    state["SpellBuffRemoveCurrent"] = &ScriptHelper::SpellBuffRemoveCurrent;
    state["SpellBuffRemoveType"] = &ScriptHelper::SpellBuffRemoveType;
    state["HasBuffOfType"] = &ScriptHelper::HasBuffOfType;
    state["SpellEffectCreate"] = &ScriptHelper::SpellEffectCreate;
    state["TeleportToKeyLocation"] = &ScriptHelper::TeleportToKeyLocation;
    state["TeleportToPosition"] = &ScriptHelper::TeleportToPosition;
    state["GetAIState"] = &ScriptHelper::GetAIState;
    state["GetCanAttack"] = &ScriptHelper::GetCanAttack;
    state["GetCanCast"] = &ScriptHelper::GetCanCast;
    state["IsAutoCastOn"] = &ScriptHelper::IsAutoCastOn;
    state["GetCanMove"] = &ScriptHelper::GetCanMove;
    state["SetCanAttack"] = &ScriptHelper::SetCanAttack;
    state["SetCanCast"] = &ScriptHelper::SetCanCast;
    state["SetCanMove"] = &ScriptHelper::SetCanMove;
    state["IsBaseAI"] = &ScriptHelper::IsBaseAI;
    state["IsHeroAI"] = &ScriptHelper::IsHeroAI;
    state["IsMelee"] = &ScriptHelper::IsMelee;
    state["IsRanged"] = &ScriptHelper::IsRanged;
    state["IsMoving"] = &ScriptHelper::IsMoving;
    state["IncFlatGoldPer10Mod"] = &ScriptHelper::IncFlatGoldPer10Mod;
    state["IncPermanentFlatGoldPer10Mod"] = &ScriptHelper::IncPermanentFlatGoldPer10Mod;
    state["IncBaseAttackDamage"] = &ScriptHelper::IncBaseAttackDamage;
    state["IncPermanentBaseAttackDamage"] = &ScriptHelper::IncPermanentBaseAttackDamage;
    state["IncFlatArmorMod"] = &ScriptHelper::IncFlatArmorMod;
    state["IncPermanentFlatArmorMod"] = &ScriptHelper::IncPermanentFlatArmorMod;
    state["IncFlatArmorPenetrationMod"] = &ScriptHelper::IncFlatArmorPenetrationMod;
    state["IncPermanentFlatArmorPenetrationMod"] = &ScriptHelper::IncPermanentFlatArmorPenetrationMod;
    state["IncFlatMagicPenetrationMod"] = &ScriptHelper::IncFlatMagicPenetrationMod;
    state["IncPermanentFlatMagicPenetrationMod"] = &ScriptHelper::IncPermanentFlatMagicPenetrationMod;
    state["IncFlatSpellBlockMod"] = &ScriptHelper::IncFlatSpellBlockMod;
    state["IncPermanentFlatSpellBlockMod"] = &ScriptHelper::IncPermanentFlatSpellBlockMod;
    state["IncFlatAttackRangeMod"] = &ScriptHelper::IncFlatAttackRangeMod;
    state["IncPermanentFlatAttackRangeMod"] = &ScriptHelper::IncPermanentFlatAttackRangeMod;
    state["IncFlatCastRangeMod"] = &ScriptHelper::IncFlatCastRangeMod;
    state["IncPermanentFlatCastRangeMod"] = &ScriptHelper::IncPermanentFlatCastRangeMod;
    state["IncFlatCooldownMod"] = &ScriptHelper::IncFlatCooldownMod;
    state["IncPermanentFlatCooldownMod"] = &ScriptHelper::IncPermanentFlatCooldownMod;
    state["IncFlatCritChanceMod"] = &ScriptHelper::IncFlatCritChanceMod;
    state["IncPermanentFlatCritChanceMod"] = &ScriptHelper::IncPermanentFlatCritChanceMod;
    state["IncFlatCritDamageMod"] = &ScriptHelper::IncFlatCritDamageMod;
    state["IncPermanentFlatCritDamageMod"] = &ScriptHelper::IncPermanentFlatCritDamageMod;
    state["IncFlatHPPoolMod"] = &ScriptHelper::IncFlatHPPoolMod;
    state["IncPermanentFlatHPPoolMod"] = &ScriptHelper::IncPermanentFlatHPPoolMod;
    state["IncFlatHPRegenMod"] = &ScriptHelper::IncFlatHPRegenMod;
    state["IncPermanentFlatHPRegenMod"] = &ScriptHelper::IncPermanentFlatHPRegenMod;
    state["IncFlatMagicDamageMod"] = &ScriptHelper::IncFlatMagicDamageMod;
    state["IncPermanentFlatMagicDamageMod"] = &ScriptHelper::IncPermanentFlatMagicDamageMod;
    state["IncFlatMagicReduction"] = &ScriptHelper::IncFlatMagicReduction;
    state["IncPermanentFlatMagicReduction"] = &ScriptHelper::IncPermanentFlatMagicReduction;
    state["IncFlatMovementSpeedMod"] = &ScriptHelper::IncFlatMovementSpeedMod;
    state["IncPermanentFlatMovementSpeedMod"] = &ScriptHelper::IncPermanentFlatMovementSpeedMod;
    state["IncFlatPhysicalDamageMod"] = &ScriptHelper::IncFlatPhysicalDamageMod;
    state["IncPermanentFlatPhysicalDamageMod"] = &ScriptHelper::IncPermanentFlatPhysicalDamageMod;
    state["IncFlatPhysicalReduction"] = &ScriptHelper::IncFlatPhysicalReduction;
    state["IncPermanentFlatPhysicalReduction"] = &ScriptHelper::IncPermanentFlatPhysicalReduction;
    state["IncFlatBubbleRadiusMod"] = &ScriptHelper::IncFlatBubbleRadiusMod;
    state["IncPermanentFlatBubbleRadiusMod"] = &ScriptHelper::IncPermanentFlatBubbleRadiusMod;
    state["IncPercentHardnessMod"] = &ScriptHelper::IncPercentHardnessMod;
    state["IncPermanentPercentHardnessMod"] = &ScriptHelper::IncPermanentPercentHardnessMod;
    state["IncPercentArmorMod"] = &ScriptHelper::IncPercentArmorMod;
    state["IncPermanentPercentArmorMod"] = &ScriptHelper::IncPermanentPercentArmorMod;
    state["IncPercentSpellBlockMod"] = &ScriptHelper::IncPercentSpellBlockMod;
    state["IncPermanentPercentSpellBlockMod"] = &ScriptHelper::IncPermanentPercentSpellBlockMod;
    state["IncPercentAttackRangeMod"] = &ScriptHelper::IncPercentAttackRangeMod;
    state["IncPermanentPercentAttackRangeMod"] = &ScriptHelper::IncPermanentPercentAttackRangeMod;
    state["IncPercentAttackSpeedMod"] = &ScriptHelper::IncPercentAttackSpeedMod;
    state["IncPermanentPercentAttackSpeedMod"] = &ScriptHelper::IncPermanentPercentAttackSpeedMod;
    state["IncPercentCastRangeMod"] = &ScriptHelper::IncPercentCastRangeMod;
    state["IncPermanentPercentCastRangeMod"] = &ScriptHelper::IncPermanentPercentCastRangeMod;
    state["IncPercentCooldownMod"] = &ScriptHelper::IncPercentCooldownMod;
    state["IncPermanentPercentCooldownMod"] = &ScriptHelper::IncPermanentPercentCooldownMod;
    state["IncPercentCritDamageMod"] = &ScriptHelper::IncPercentCritDamageMod;
    state["IncPermanentPercentCritDamageMod"] = &ScriptHelper::IncPermanentPercentCritDamageMod;
    state["IncPercentEXPBonus"] = &ScriptHelper::IncPercentEXPBonus;
    state["IncPermanentPercentEXPBonus"] = &ScriptHelper::IncPermanentPercentEXPBonus;
    state["IncPercentHPPoolMod"] = &ScriptHelper::IncPercentHPPoolMod;
    state["IncPermanentPercentHPPoolMod"] = &ScriptHelper::IncPermanentPercentHPPoolMod;
    state["IncPercentHPRegenMod"] = &ScriptHelper::IncPercentHPRegenMod;
    state["IncPermanentPercentHPRegenMod"] = &ScriptHelper::IncPermanentPercentHPRegenMod;
    state["IncPercentHealingAmountMod"] = &ScriptHelper::IncPercentHealingAmountMod;
    state["IncPermanentPercentHealingAmountMod"] = &ScriptHelper::IncPermanentPercentHealingAmountMod;
    state["IncPercentLifeStealMod"] = &ScriptHelper::IncPercentLifeStealMod;
    state["IncPermanentPercentLifeStealMod"] = &ScriptHelper::IncPermanentPercentLifeStealMod;
    state["IncPercentSpellVampMod"] = &ScriptHelper::IncPercentSpellVampMod;
    state["IncPermanentPercentSpellVampMod"] = &ScriptHelper::IncPermanentPercentSpellVampMod;
    state["IncPercentMagicDamageMod"] = &ScriptHelper::IncPercentMagicDamageMod;
    state["IncPermanentPercentMagicDamageMod"] = &ScriptHelper::IncPermanentPercentMagicDamageMod;
    state["IncPercentMagicReduction"] = &ScriptHelper::IncPercentMagicReduction;
    state["IncPermanentPercentMagicReduction"] = &ScriptHelper::IncPermanentPercentMagicReduction;
    state["IncPercentMovementSpeedMod"] = &ScriptHelper::IncPercentMovementSpeedMod;
    state["IncPermanentPercentMovementSpeedMod"] = &ScriptHelper::IncPermanentPercentMovementSpeedMod;
    state["IncPercentPhysicalDamageMod"] = &ScriptHelper::IncPercentPhysicalDamageMod;
    state["IncPermanentPercentPhysicalDamageMod"] = &ScriptHelper::IncPermanentPercentPhysicalDamageMod;
    state["IncPercentPhysicalReduction"] = &ScriptHelper::IncPercentPhysicalReduction;
    state["IncPermanentPercentPhysicalReduction"] = &ScriptHelper::IncPermanentPercentPhysicalReduction;
    state["IncPercentRespawnTimeMod"] = &ScriptHelper::IncPercentRespawnTimeMod;
    state["IncPermanentPercentRespawnTimeMod"] = &ScriptHelper::IncPermanentPercentRespawnTimeMod;
    state["IncPercentGoldLostOnDeathMod"] = &ScriptHelper::IncPercentGoldLostOnDeathMod;
    state["IncPermanentPercentGoldLostOnDeathMod"] = &ScriptHelper::IncPermanentPercentGoldLostOnDeathMod;
    state["IncPercentBubbleRadiusMod"] = &ScriptHelper::IncPercentBubbleRadiusMod;
    state["IncPermanentPercentBubbleRadiusMod"] = &ScriptHelper::IncPermanentPercentBubbleRadiusMod;
    state["IncAcquisitionRangeMod"] = &ScriptHelper::IncAcquisitionRangeMod;
    state["IncPermanentAcquisitionRangeMod"] = &ScriptHelper::IncPermanentAcquisitionRangeMod;
    state["GetFlatGoldPer10Mod"] = &ScriptHelper::GetFlatGoldPer10Mod;
    state["GetBaseAttackDamage"] = &ScriptHelper::GetBaseAttackDamage;
    state["GetFlatArmorMod"] = &ScriptHelper::GetFlatArmorMod;
    state["GetFlatArmorPenetrationMod"] = &ScriptHelper::GetFlatArmorPenetrationMod;
    state["GetFlatMagicPenetrationMod"] = &ScriptHelper::GetFlatMagicPenetrationMod;
    state["GetFlatSpellBlockMod"] = &ScriptHelper::GetFlatSpellBlockMod;
    state["GetFlatAttackRangeMod"] = &ScriptHelper::GetFlatAttackRangeMod;
    state["GetFlatCastRangeMod"] = &ScriptHelper::GetFlatCastRangeMod;
    state["GetFlatCooldownMod"] = &ScriptHelper::GetFlatCooldownMod;
    state["GetFlatCritChanceMod"] = &ScriptHelper::GetFlatCritChanceMod;
    state["GetFlatCritDamageMod"] = &ScriptHelper::GetFlatCritDamageMod;
    state["GetFlatHPPoolMod"] = &ScriptHelper::GetFlatHPPoolMod;
    state["GetFlatHPRegenMod"] = &ScriptHelper::GetFlatHPRegenMod;
    state["GetFlatMagicDamageMod"] = &ScriptHelper::GetFlatMagicDamageMod;
    state["GetFlatMagicReduction"] = &ScriptHelper::GetFlatMagicReduction;
    state["GetFlatMovementSpeedMod"] = &ScriptHelper::GetFlatMovementSpeedMod;
    state["GetFlatPhysicalDamageMod"] = &ScriptHelper::GetFlatPhysicalDamageMod;
    state["GetFlatPhysicalReduction"] = &ScriptHelper::GetFlatPhysicalReduction;
    state["GetFlatBubbleRadiusMod"] = &ScriptHelper::GetFlatBubbleRadiusMod;
    state["GetPercentHardnessMod"] = &ScriptHelper::GetPercentHardnessMod;
    state["GetPercentArmorMod"] = &ScriptHelper::GetPercentArmorMod;
    state["GetPercentSpellBlockMod"] = &ScriptHelper::GetPercentSpellBlockMod;
    state["GetPercentAttackRangeMod"] = &ScriptHelper::GetPercentAttackRangeMod;
    state["GetPercentAttackSpeedMod"] = &ScriptHelper::GetPercentAttackSpeedMod;
    state["GetPercentCastRangeMod"] = &ScriptHelper::GetPercentCastRangeMod;
    state["GetPercentCooldownMod"] = &ScriptHelper::GetPercentCooldownMod;
    state["GetPercentCritDamageMod"] = &ScriptHelper::GetPercentCritDamageMod;
    state["GetPercentEXPBonus"] = &ScriptHelper::GetPercentEXPBonus;
    state["GetPercentHPPoolMod"] = &ScriptHelper::GetPercentHPPoolMod;
    state["GetPercentHPRegenMod"] = &ScriptHelper::GetPercentHPRegenMod;
    state["GetPercentHealingAmountMod"] = &ScriptHelper::GetPercentHealingAmountMod;
    state["GetPercentLifeStealMod"] = &ScriptHelper::GetPercentLifeStealMod;
    state["GetPercentSpellVampMod"] = &ScriptHelper::GetPercentSpellVampMod;
    state["GetPercentMagicDamageMod"] = &ScriptHelper::GetPercentMagicDamageMod;
    state["GetPercentMagicReduction"] = &ScriptHelper::GetPercentMagicReduction;
    state["GetPercentMovementSpeedMod"] = &ScriptHelper::GetPercentMovementSpeedMod;
    state["GetPercentPhysicalDamageMod"] = &ScriptHelper::GetPercentPhysicalDamageMod;
    state["GetPercentPhysicalReduction"] = &ScriptHelper::GetPercentPhysicalReduction;
    state["GetPercentRespawnTimeMod"] = &ScriptHelper::GetPercentRespawnTimeMod;
    state["GetPercentGoldLostOnDeathMod"] = &ScriptHelper::GetPercentGoldLostOnDeathMod;
    state["GetPercentBubbleRadiusMod"] = &ScriptHelper::GetPercentBubbleRadiusMod;
    state["GetAcquisitionRangeMod"] = &ScriptHelper::GetAcquisitionRangeMod;

    //Extra
    state["DefUpdateAura"] = &ScriptHelper::DefUpdateAura;
    state["BBIsTargetBehindMe"] = &ScriptHelper::BBIsTargetBehindMe;
    state["BBIsTargetInFrontOfMe"] = &ScriptHelper::BBIsTargetInFrontOfMe;
    state["IsDead"] = &ScriptHelper::IsDead;
    state["DistanceBetweenObjects"] = &ScriptHelper::DistanceBetweenObjects;
    state["DistanceBetweenObjectAndPoint"] = &ScriptHelper::DistanceBetweenObjectAndPoint;
    state["DistanceBetweenPoints"] = &ScriptHelper::DistanceBetweenPoints;
    state["SetSpellCastRange"] = &ScriptHelper::SetSpellCastRange;
}

void ScriptHelper::InitState(sol::state_view state)
{
    state.open_libraries(sol::lib::base, sol::lib::math , sol::lib::os, sol::lib::string);
    state.new_usertype<r3dPoint3D>("r3dPoint3D");
    state.new_usertype<GameObject>("GameObject");
    ScriptHelper::RegisterGlobals(state.globals());
    ScriptHelper::LoadLuaFile("DATA/BuildingBlocks/BuildingBlocksBase.lua", state);
    ScriptHelper::LoadLuaFile("DATA/BuildingBlocks/BBLuaConversionLibrary.lua", state);
}

bool ScriptHelper::LoadLuaFile(std::string name, sol::state_view state)
{
    auto path = r3dFileManager::getFilePath(name);
    if(path == "")
        path = r3dFileManager::getFilePath(name+"obj");
    if(path == "")
        return false;
    std::cout<<"Loading: "<<path<<std::endl;
    state.do_file(path);
    return true;
}

void ScriptHelper::LoadScriptIntoScript(std::string name, sol::this_state state){
    if(!LoadLuaFile(name, state))
        if(!LoadLuaFile("LEVELS/"+mMapName+"/Scripts/"+name, state))
            LoadLuaFile("DATA/Scripts/"+name, state);
}
